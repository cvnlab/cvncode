function f = cmfecccmap(maxecc)

% function f = cmfecccmap(maxecc)
%
% <maxecc> sets the number at which the final color ends (see function for details)
%
% return a 256 x 3 colormap.

if ~exist('maxecc','var') || isempty(maxecc)
  maxecc = 12;
end

cmap = [...
0. 0. 0. 0.666667;
0.5 1. 0.333333 1.;
1. 0.666667 0. 0.;
2. 1. 1. 0.333333;
4. 0. 0.666667 0.;
7. 0.333333 1. 1.;
8. 0.333333 0.333333 0.333333;
%12. 0.333333 0.333333 0.333333;
12. 0. 0. 0.;
90. 1. 1. 1.;
];

eccs = linspace(0,maxecc,257);
eccs = (eccs(1:end-1) + eccs(2:end))/2;

finalcmap = [];
for p=1:length(eccs)
  temp = eccs(p);
  finalcmap(p,1) = interp1(cmap(:,1),cmap(:,2),temp,'linear');
  finalcmap(p,2) = interp1(cmap(:,1),cmap(:,3),temp,'linear');
  finalcmap(p,3) = interp1(cmap(:,1),cmap(:,4),temp,'linear');
end
f = finalcmap;

% % f = [ ...
% %                   0.015625            0.005208328125            0.671875328125
% %                   0.046875            0.015624984375            0.682291984375
% %                   0.078125            0.026041640625            0.692708640625
% %                   0.109375            0.036458296875            0.703125296875
% %                   0.140625            0.046874953125            0.713541953125
% %                   0.171875            0.057291609375            0.723958609375
% %                   0.203125            0.067708265625            0.734375265625
% %                   0.234375            0.078124921875            0.744791921875
% %                   0.265625            0.088541578125            0.755208578125
% %                   0.296875            0.098958234375            0.765625234375
% %                   0.328125            0.109374890625            0.776041890625
% %                   0.359375            0.119791546875            0.786458546875
% %                   0.390625            0.130208203125            0.796875203125
% %                   0.421875            0.140624859375            0.807291859375
% %                   0.453125            0.151041515625            0.817708515625
% %                   0.484375            0.161458171875            0.828125171875
% %                   0.515625            0.171874828125            0.838541828125
% %                   0.546875            0.182291484375            0.848958484375
% %                   0.578125            0.192708140625            0.859375140625
% %                   0.609375            0.203124796875            0.869791796875
% %                   0.640625            0.213541453125            0.880208453125
% %                   0.671875            0.223958109375            0.890625109375
% %                   0.703125            0.234374765625            0.901041765625
% %                   0.734375            0.244791421875            0.911458421875
% %                   0.765625            0.255208078125            0.921875078125
% %                   0.796875            0.265624734375            0.932291734375
% %                   0.828125            0.276041390625            0.942708390625
% %                   0.859375            0.286458046875            0.953125046875
% %                   0.890625            0.296874703125            0.963541703125
% %                   0.921875            0.307291359375            0.973958359375
% %                   0.953125            0.317708015625            0.984375015625
% %                   0.984375            0.328124671875            0.994791671875
% %             0.994791671875            0.328124671875                  0.984375
% %             0.984375015625            0.317708015625                  0.953125
% %             0.973958359375            0.307291359375                  0.921875
% %             0.963541703125            0.296874703125                  0.890625
% %             0.953125046875            0.286458046875                  0.859375
% %             0.942708390625            0.276041390625                  0.828125
% %             0.932291734375            0.265624734375                  0.796875
% %             0.921875078125            0.255208078125                  0.765625
% %             0.911458421875            0.244791421875                  0.734375
% %             0.901041765625            0.234374765625                  0.703125
% %             0.890625109375            0.223958109375                  0.671875
% %             0.880208453125            0.213541453125                  0.640625
% %             0.869791796875            0.203124796875                  0.609375
% %             0.859375140625            0.192708140625                  0.578125
% %             0.848958484375            0.182291484375                  0.546875
% %             0.838541828125            0.171874828125                  0.515625
% %             0.828125171875            0.161458171875                  0.484375
% %             0.817708515625            0.151041515625                  0.453125
% %             0.807291859375            0.140624859375                  0.421875
% %             0.796875203125            0.130208203125                  0.390625
% %             0.786458546875            0.119791546875                  0.359375
% %             0.776041890625            0.109374890625                  0.328125
% %             0.765625234375            0.098958234375                  0.296875
% %             0.755208578125            0.088541578125                  0.265625
% %             0.744791921875            0.078124921875                  0.234375
% %             0.734375265625            0.067708265625                  0.203125
% %             0.723958609375            0.057291609375                  0.171875
% %             0.713541953125            0.046874953125                  0.140625
% %             0.703125296875            0.036458296875                  0.109375
% %             0.692708640625            0.026041640625                  0.078125
% %             0.682291984375            0.015624984375                  0.046875
% %             0.671875328125            0.005208328125                  0.015625
% %            0.6692711640625                 0.0078125           0.0026041640625
% %            0.6744794921875                 0.0234375           0.0078124921875
% %            0.6796878203125                 0.0390625           0.0130208203125
% %            0.6848961484375                 0.0546875           0.0182291484375
% %            0.6901044765625                 0.0703125           0.0234374765625
% %            0.6953128046875                 0.0859375           0.0286458046875
% %            0.7005211328125                 0.1015625           0.0338541328125
% %            0.7057294609375                 0.1171875           0.0390624609375
% %            0.7109377890625                 0.1328125           0.0442707890625
% %            0.7161461171875                 0.1484375           0.0494791171875
% %            0.7213544453125                 0.1640625           0.0546874453125
% %            0.7265627734375                 0.1796875           0.0598957734375
% %            0.7317711015625                 0.1953125           0.0651041015625
% %            0.7369794296875                 0.2109375           0.0703124296875
% %            0.7421877578125                 0.2265625           0.0755207578125
% %            0.7473960859375                 0.2421875           0.0807290859375
% %            0.7526044140625                 0.2578125           0.0859374140625
% %            0.7578127421875                 0.2734375           0.0911457421875
% %            0.7630210703125                 0.2890625           0.0963540703125
% %            0.7682293984375                 0.3046875           0.1015623984375
% %            0.7734377265625                 0.3203125           0.1067707265625
% %            0.7786460546875                 0.3359375           0.1119790546875
% %            0.7838543828125                 0.3515625           0.1171873828125
% %            0.7890627109375                 0.3671875           0.1223957109375
% %            0.7942710390625                 0.3828125           0.1276040390625
% %            0.7994793671875                 0.3984375           0.1328123671875
% %            0.8046876953125                 0.4140625           0.1380206953125
% %            0.8098960234375                 0.4296875           0.1432290234375
% %            0.8151043515625                 0.4453125           0.1484373515625
% %            0.8203126796875                 0.4609375           0.1536456796875
% %            0.8255210078125                 0.4765625           0.1588540078125
% %            0.8307293359375                 0.4921875           0.1640623359375
% %            0.8359376640625                 0.5078125           0.1692706640625
% %            0.8411459921875                 0.5234375           0.1744789921875
% %            0.8463543203125                 0.5390625           0.1796873203125
% %            0.8515626484375                 0.5546875           0.1848956484375
% %            0.8567709765625                 0.5703125           0.1901039765625
% %            0.8619793046875                 0.5859375           0.1953123046875
% %            0.8671876328125                 0.6015625           0.2005206328125
% %            0.8723959609375                 0.6171875           0.2057289609375
% %            0.8776042890625                 0.6328125           0.2109372890625
% %            0.8828126171875                 0.6484375           0.2161456171875
% %            0.8880209453125                 0.6640625           0.2213539453125
% %            0.8932292734375                 0.6796875           0.2265622734375
% %            0.8984376015625                 0.6953125           0.2317706015625
% %            0.9036459296875                 0.7109375           0.2369789296875
% %            0.9088542578125                 0.7265625           0.2421872578125
% %            0.9140625859375                 0.7421875           0.2473955859375
% %            0.9192709140625                 0.7578125           0.2526039140625
% %            0.9244792421875                 0.7734375           0.2578122421875
% %            0.9296875703125                 0.7890625           0.2630205703125
% %            0.9348958984375                 0.8046875           0.2682288984375
% %            0.9401042265625                 0.8203125           0.2734372265625
% %            0.9453125546875                 0.8359375           0.2786455546875
% %            0.9505208828125                 0.8515625           0.2838538828125
% %            0.9557292109375                 0.8671875           0.2890622109375
% %            0.9609375390625                 0.8828125           0.2942705390625
% %            0.9661458671875                 0.8984375           0.2994788671875
% %            0.9713541953125                 0.9140625           0.3046871953125
% %            0.9765625234375                 0.9296875           0.3098955234375
% %            0.9817708515625                 0.9453125           0.3151038515625
% %            0.9869791796875                 0.9609375           0.3203121796875
% %            0.9921875078125                 0.9765625           0.3255205078125
% %            0.9973958359375                 0.9921875           0.3307288359375
% %                 0.99609375          0.99869791796875          0.33203091796875
% %                 0.98828125          0.99609375390625          0.32942675390625
% %                 0.98046875          0.99348958984375          0.32682258984375
% %                 0.97265625          0.99088542578125          0.32421842578125
% %                 0.96484375          0.98828126171875          0.32161426171875
% %                 0.95703125          0.98567709765625          0.31901009765625
% %                 0.94921875          0.98307293359375          0.31640593359375
% %                 0.94140625          0.98046876953125          0.31380176953125
% %                 0.93359375          0.97786460546875          0.31119760546875
% %                 0.92578125          0.97526044140625          0.30859344140625
% %                 0.91796875          0.97265627734375          0.30598927734375
% %                 0.91015625          0.97005211328125          0.30338511328125
% %                 0.90234375          0.96744794921875          0.30078094921875
% %                 0.89453125          0.96484378515625          0.29817678515625
% %                 0.88671875          0.96223962109375          0.29557262109375
% %                 0.87890625          0.95963545703125          0.29296845703125
% %                 0.87109375          0.95703129296875          0.29036429296875
% %                 0.86328125          0.95442712890625          0.28776012890625
% %                 0.85546875          0.95182296484375          0.28515596484375
% %                 0.84765625          0.94921880078125          0.28255180078125
% %                 0.83984375          0.94661463671875          0.27994763671875
% %                 0.83203125          0.94401047265625          0.27734347265625
% %                 0.82421875          0.94140630859375          0.27473930859375
% %                 0.81640625          0.93880214453125          0.27213514453125
% %                 0.80859375          0.93619798046875          0.26953098046875
% %                 0.80078125          0.93359381640625          0.26692681640625
% %                 0.79296875          0.93098965234375          0.26432265234375
% %                 0.78515625          0.92838548828125          0.26171848828125
% %                 0.77734375          0.92578132421875          0.25911432421875
% %                 0.76953125          0.92317716015625          0.25651016015625
% %                 0.76171875          0.92057299609375          0.25390599609375
% %                 0.75390625          0.91796883203125          0.25130183203125
% %                 0.74609375          0.91536466796875          0.24869766796875
% %                 0.73828125          0.91276050390625          0.24609350390625
% %                 0.73046875          0.91015633984375          0.24348933984375
% %                 0.72265625          0.90755217578125          0.24088517578125
% %                 0.71484375          0.90494801171875          0.23828101171875
% %                 0.70703125          0.90234384765625          0.23567684765625
% %                 0.69921875          0.89973968359375          0.23307268359375
% %                 0.69140625          0.89713551953125          0.23046851953125
% %                 0.68359375          0.89453135546875          0.22786435546875
% %                 0.67578125          0.89192719140625          0.22526019140625
% %                 0.66796875          0.88932302734375          0.22265602734375
% %                 0.66015625          0.88671886328125          0.22005186328125
% %                 0.65234375          0.88411469921875          0.21744769921875
% %                 0.64453125          0.88151053515625          0.21484353515625
% %                 0.63671875          0.87890637109375          0.21223937109375
% %                 0.62890625          0.87630220703125          0.20963520703125
% %                 0.62109375          0.87369804296875          0.20703104296875
% %                 0.61328125          0.87109387890625          0.20442687890625
% %                 0.60546875          0.86848971484375          0.20182271484375
% %                 0.59765625          0.86588555078125          0.19921855078125
% %                 0.58984375          0.86328138671875          0.19661438671875
% %                 0.58203125          0.86067722265625          0.19401022265625
% %                 0.57421875          0.85807305859375          0.19140605859375
% %                 0.56640625          0.85546889453125          0.18880189453125
% %                 0.55859375          0.85286473046875          0.18619773046875
% %                 0.55078125          0.85026056640625          0.18359356640625
% %                 0.54296875          0.84765640234375          0.18098940234375
% %                 0.53515625          0.84505223828125          0.17838523828125
% %                 0.52734375          0.84244807421875          0.17578107421875
% %                 0.51953125          0.83984391015625          0.17317691015625
% %                 0.51171875          0.83723974609375          0.17057274609375
% %                 0.50390625          0.83463558203125          0.16796858203125
% %                 0.49609375          0.83203141796875          0.16536441796875
% %                 0.48828125          0.82942725390625          0.16276025390625
% %                 0.48046875          0.82682308984375          0.16015608984375
% %                 0.47265625          0.82421892578125          0.15755192578125
% %                 0.46484375          0.82161476171875          0.15494776171875
% %                 0.45703125          0.81901059765625          0.15234359765625
% %                 0.44921875          0.81640643359375          0.14973943359375
% %                 0.44140625          0.81380226953125          0.14713526953125
% %                 0.43359375          0.81119810546875          0.14453110546875
% %                 0.42578125          0.80859394140625          0.14192694140625
% %                 0.41796875          0.80598977734375          0.13932277734375
% %                 0.41015625          0.80338561328125          0.13671861328125
% %                 0.40234375          0.80078144921875          0.13411444921875
% %                 0.39453125          0.79817728515625          0.13151028515625
% %                 0.38671875          0.79557312109375          0.12890612109375
% %                 0.37890625          0.79296895703125          0.12630195703125
% %                 0.37109375          0.79036479296875          0.12369779296875
% %                 0.36328125          0.78776062890625          0.12109362890625
% %                 0.35546875          0.78515646484375          0.11848946484375
% %                 0.34765625          0.78255230078125          0.11588530078125
% %                 0.33984375          0.77994813671875          0.11328113671875
% %                 0.33203125          0.77734397265625          0.11067697265625
% %                 0.32421875          0.77473980859375          0.10807280859375
% %                 0.31640625          0.77213564453125          0.10546864453125
% %                 0.30859375          0.76953148046875          0.10286448046875
% %                 0.30078125          0.76692731640625          0.10026031640625
% %                 0.29296875          0.76432315234375          0.09765615234375
% %                 0.28515625          0.76171898828125          0.09505198828125
% %                 0.27734375          0.75911482421875          0.09244782421875
% %                 0.26953125          0.75651066015625          0.08984366015625
% %                 0.26171875          0.75390649609375          0.08723949609375
% %                 0.25390625          0.75130233203125          0.08463533203125
% %                 0.24609375          0.74869816796875          0.08203116796875
% %                 0.23828125          0.74609400390625          0.07942700390625
% %                 0.23046875          0.74348983984375          0.07682283984375
% %                 0.22265625          0.74088567578125          0.07421867578125
% %                 0.21484375          0.73828151171875          0.07161451171875
% %                 0.20703125          0.73567734765625          0.06901034765625
% %                 0.19921875          0.73307318359375          0.06640618359375
% %                 0.19140625          0.73046901953125          0.06380201953125
% %                 0.18359375          0.72786485546875          0.06119785546875
% %                 0.17578125          0.72526069140625          0.05859369140625
% %                 0.16796875          0.72265652734375          0.05598952734375
% %                 0.16015625          0.72005236328125          0.05338536328125
% %                 0.15234375          0.71744819921875          0.05078119921875
% %                 0.14453125          0.71484403515625          0.04817703515625
% %                 0.13671875          0.71223987109375          0.04557287109375
% %                 0.12890625          0.70963570703125          0.04296870703125
% %                 0.12109375          0.70703154296875          0.04036454296875
% %                 0.11328125          0.70442737890625          0.03776037890625
% %                 0.10546875          0.70182321484375          0.03515621484375
% %                 0.09765625          0.69921905078125          0.03255205078125
% %                 0.08984375          0.69661488671875          0.02994788671875
% %                 0.08203125          0.69401072265625          0.02734372265625
% %                 0.07421875          0.69140655859375          0.02473955859375
% %                 0.06640625          0.68880239453125          0.02213539453125
% %                 0.05859375          0.68619823046875          0.01953123046875
% %                 0.05078125          0.68359406640625          0.01692706640625
% %                 0.04296875          0.68098990234375          0.01432290234375
% %                 0.03515625          0.67838573828125          0.01171873828125
% %                 0.02734375          0.67578157421875          0.00911457421875
% %                 0.01953125          0.67317741015625          0.00651041015625
% %                 0.01171875          0.67057324609375          0.00390624609375
% %                 0.00390625          0.66796908203125          0.00130208203125
% % ];
